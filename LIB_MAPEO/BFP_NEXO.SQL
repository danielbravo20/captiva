--<ScriptOptions statementTerminator=";"/>

CREATE SCHEMA "BFP_PORTAL" AUTHORIZATION "USR_NEXO";

CREATE TABLE "BFP_PORTAL"."BFPBM_ATRIBUTO" (

		"CODIGO_ATRIBUTO" INTEGER NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_MODULO_WEB" (

		"CODIGO_MODULO_WEB" VARCHAR(8) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"ORDEN" SMALLINT NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_ATRIBUTO" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"CODIGO_ATRIBUTO" INTEGER NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"CODIGO_MODULO_WEB" VARCHAR(8) NOT NULL,

		"INDICADOR_VISIBLE_DEFECTO" CHAR(1) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_PROCESO" VARCHAR(20) NOT NULL,

		"CODIGO_MODULO_WEB" VARCHAR(8) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" (

		"CODIGO_PERFIL" VARCHAR(20) NOT NULL,

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_PROCESO" VARCHAR(20) NOT NULL,

		"CODIGO_MODULO_WEB" VARCHAR(8) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_SUB_MODULO_WEB" VARCHAR(50) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB" (

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"CODIGO_SUB_MODULO_WEB" VARCHAR(50) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PROCESO" (

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_PROCESO" VARCHAR(20) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL,

		"VERSION" CHAR(17) NOT NULL DEFAULT '',

		"NOMBRE_PROCESO" VARCHAR(100) NOT NULL DEFAULT '',

		"NAMESPACE" VARCHAR(200) NOT NULL DEFAULT ''

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PROCESO_PERFIL" (

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_PROCESO" VARCHAR(20) NOT NULL,

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_PRODUCTO" (

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB" (

		"CODIGO_SUB_MODULO_WEB" VARCHAR(50) NOT NULL,

		"CODIGO_MODULO_WEB" VARCHAR(8) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"ORDEN" SMALLINT NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_TAREA" (

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"CODIGO_PRODUCTO" VARCHAR(20) NOT NULL,

		"CODIGO_PROCESO" VARCHAR(20) NOT NULL,

		"CODIGO_TAREA" VARCHAR(70) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"VERSION" CHAR(17) NOT NULL,

		"TIEMPO_ROJO" INTEGER NOT NULL,

		"TIEMPO_AMARILLO" INTEGER NOT NULL,

		"NAMESPACE" VARCHAR(20) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_TAREA_PERFIL" (

		"CODIGO_TAREA" VARCHAR(70) NOT NULL,

		"CODIGO_PERFIL" VARCHAR(50) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO" (

		"CODIGO_UNIDAD_NEGOCIO" VARCHAR(20) NOT NULL,

		"DESCRIPCION" VARCHAR(100) NOT NULL,

		"URL" VARCHAR(100) NOT NULL,

		"VERSION" CHAR(17) NOT NULL,

		"ESTADO" CHAR(1) NOT NULL,

		"USUARIO_CREACION" VARCHAR(50) NOT NULL,

		"FECHA_CREACION" TIMESTAMP NOT NULL,

		"USUARIO_ACTUALIZACION" VARCHAR(50) NOT NULL,

		"FECHA_ACTUALIZACION" TIMESTAMP NOT NULL

	)

	DATA CAPTURE NONE;

CREATE TABLE "BFP_PORTAL"."BFPBM_USUARIO_ATRIBUTO" (

		"CODIGO_USUARIO" VARCHAR(50) NOT NULL,

		"CODIGO_ATRIBUTO" INTEGER NOT NULL,

		"CODIGO_DESCRIPCION" VARCHAR(255) NOT NULL,

		"DESCRIPCION" VARCHAR(255) NOT NULL

	)

	DATA CAPTURE NONE;

ALTER TABLE "BFP_PORTAL"."BFPBM_ATRIBUTO" ADD CONSTRAINT "BFPBM_ATRIBUTO_PK" PRIMARY KEY

	("CODIGO_ATRIBUTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_MODULO_WEB" PRIMARY KEY

	("CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL" ADD CONSTRAINT "PK_BFPBM_PERFIL" PRIMARY KEY

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_ATRIBUTO" ADD CONSTRAINT "BFPBM_PERFIL_ATRI1" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_ATRIBUTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_PERFIL_MODULO_WEB" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_PERFIL_PROCESO_MODULO_WEB" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO",

	 "CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" ADD CONSTRAINT "PK_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO",

	 "CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_PRODUCTO",

	 "CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_SUB_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_PERFIL_SUB_MODULO_WEB" PRIMARY KEY

	("CODIGO_PERFIL",

	 "CODIGO_SUB_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PROCESO" ADD CONSTRAINT "PK_BFPBM_PROCESO" PRIMARY KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PROCESO_PERFIL" ADD CONSTRAINT "PK_BFPBM_PROCESO_PERFIL" PRIMARY KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO",

	 "CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PRODUCTO" ADD CONSTRAINT "PK_BFPBM_PRODUCTO" PRIMARY KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB" ADD CONSTRAINT "PK_BFPBM_SUB_MODULO_WEB" PRIMARY KEY

	("CODIGO_SUB_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_TAREA" ADD CONSTRAINT "PK_BFPBM_TAREA" PRIMARY KEY

	("CODIGO_TAREA");

ALTER TABLE "BFP_PORTAL"."BFPBM_TAREA_PERFIL" ADD CONSTRAINT "PK_BFPBM_TAREA_PERFIL" PRIMARY KEY

	("CODIGO_TAREA",

	 "CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO" ADD CONSTRAINT "PK_BFPBM_UNIDAD_NEGOCIO" PRIMARY KEY

	("CODIGO_UNIDAD_NEGOCIO");

ALTER TABLE "BFP_PORTAL"."BFPBM_USUARIO_ATRIBUTO" ADD CONSTRAINT "BFPBM_USUARIO_ATR1" PRIMARY KEY

	("CODIGO_USUARIO",

	 "CODIGO_ATRIBUTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_ATRIBUTO" ADD CONSTRAINT "BFPBM_PERF_BFPB_F1" FOREIGN KEY

	("CODIGO_ATRIBUTO")

	REFERENCES "BFP_PORTAL"."BFPBM_ATRIBUTO"

	("CODIGO_ATRIBUTO")

	ON DELETE CASCADE;

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_MODULO_WEB_BFP_PORTAL_BFPBM_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_MODULO_WEB"

	("CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_MODULO_WEB_BFP_PORTAL_BFPBM_PERFIL_FK1" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_MODULO_WEB_BFP_PORTAL_BFPBM_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_MODULO_WEB"

	("CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_MODULO_WEB_BFP_PORTAL_BFPBM_PERFIL_FK1" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_MODULO_WEB_BFP_PORTAL_BFPBM_PROCESO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO")

	REFERENCES "BFP_PORTAL"."BFPBM_PROCESO"

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_BFP_PORTAL_BFPBM_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_MODULO_WEB"

	("CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_BFP_PORTAL_BFPBM_PERFIL_FK1" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_BFP_PORTAL_BFPBM_PROCESO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO")

	REFERENCES "BFP_PORTAL"."BFPBM_PROCESO"

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_PERFIL_FK1" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_PRODUCTO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO")

	REFERENCES "BFP_PORTAL"."BFPBM_PRODUCTO"

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_SUB_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_SUB_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"

	("CODIGO_SUB_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_PERFIL_FK1" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL");

ALTER TABLE "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PERFIL_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_SUB_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_SUB_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"

	("CODIGO_SUB_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_PROCESO" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PROCESO_BFP_PORTAL_BFPBM_PRODUCTO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO")

	REFERENCES "BFP_PORTAL"."BFPBM_PRODUCTO"

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO");

ALTER TABLE "BFP_PORTAL"."BFPBM_PRODUCTO" ADD CONSTRAINT "BFP_PORTAL_BFPBM_PRODUCTO_BFP_PORTAL_BFPBM_UNIDAD_NEGOCIO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO")

	REFERENCES "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"

	("CODIGO_UNIDAD_NEGOCIO");

ALTER TABLE "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB" ADD CONSTRAINT "BFP_PORTAL_BFPBM_SUB_MODULO_WEB_BFP_PORTAL_BFPBM_MODULO_WEB_FK1" FOREIGN KEY

	("CODIGO_MODULO_WEB")

	REFERENCES "BFP_PORTAL"."BFPBM_MODULO_WEB"

	("CODIGO_MODULO_WEB");

ALTER TABLE "BFP_PORTAL"."BFPBM_TAREA" ADD CONSTRAINT "BFP_PORTAL_BFPBM_TAREA_BFP_PORTAL_BFPBM_PROCESO_FK1" FOREIGN KEY

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO")

	REFERENCES "BFP_PORTAL"."BFPBM_PROCESO"

	("CODIGO_UNIDAD_NEGOCIO",

	 "CODIGO_PRODUCTO",

	 "CODIGO_PROCESO");

ALTER TABLE "BFP_PORTAL"."BFPBM_TAREA_PERFIL" ADD CONSTRAINT "FK_BFPBM_TAREA_PERFIL_BFPBM_PERFIL" FOREIGN KEY

	("CODIGO_PERFIL")

	REFERENCES "BFP_PORTAL"."BFPBM_PERFIL"

	("CODIGO_PERFIL")

	ON DELETE CASCADE;

ALTER TABLE "BFP_PORTAL"."BFPBM_TAREA_PERFIL" ADD CONSTRAINT "FK_BFPBM_TAREA_PERFIL_BFPBM_TAREA" FOREIGN KEY

	("CODIGO_TAREA")

	REFERENCES "BFP_PORTAL"."BFPBM_TAREA"

	("CODIGO_TAREA")

	ON DELETE CASCADE;

ALTER TABLE "BFP_PORTAL"."BFPBM_USUARIO_ATRIBUTO" ADD CONSTRAINT "BFPBM_USUA_BFPB_FK" FOREIGN KEY

	("CODIGO_ATRIBUTO")

	REFERENCES "BFP_PORTAL"."BFPBM_ATRIBUTO"

	("CODIGO_ATRIBUTO")

	ON DELETE CASCADE;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_ATRIBUTO_LIS"

  (

     OUT   PO_CODIGO_RESPUESTA               INTEGER,

     OUT   PO_MENSAJE_RESPUESTA              VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_ATRIBUTO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_ATRIBUTO

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 18/12/2014

--* Fec. Actualizacion: 18/12/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_ATRIBUTO_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_ATRIBUTO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

      ATR.CODIGO_ATRIBUTO,

      ATR.DESCRIPCION

    FROM 

      BFP_PORTAL.BFPBM_ATRIBUTO           ATR

    ORDER BY ATR.CODIGO_ATRIBUTO';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PERFILES_LIS"

  (

     IN    PI_CODIGOS_PERFIL              VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFILES_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input: PI_CODIGOS_PERFIL - CÃ³digo(s) del Perfil(es)

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PERFILES_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFILES_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

	  CODIGO_PERFIL, DESCRIPCION, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

	FROM

	  BFP_PORTAL.BFPBM_PERFIL

    WHERE 

      CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||')';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PERFIL_ATRIBUTO_LIS"

  (

     IN    PI_CODIGOS_PERFIL                 VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA               INTEGER,

     OUT   PO_MENSAJE_RESPUESTA              VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_ATRIBUTO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.SP_BFPBM_PERFIL_ATRIBUTO_LIS

--* Input: PI_CODIGOS_PERFIL - CÃ³digos del Perfil a listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 15/12/2014

--* Fec. Actualizacion: 15/12/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PERFIL_ATRIBUTO_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_ATRIBUTO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

      PAT.CODIGO_PERFIL,

      ATR.CODIGO_ATRIBUTO,

      ATR.DESCRIPCION

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_ATRIBUTO    PAT,

      BFP_PORTAL.BFPBM_ATRIBUTO           ATR

    WHERE 

      PAT.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PAT.CODIGO_ATRIBUTO = ATR.CODIGO_ATRIBUTO AND

	  ATR.ESTADO = 1 

    ORDER BY ATR.CODIGO_ATRIBUTO';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PERFIL_MODULO_WEB_LIS"

  (

     IN    PI_CODIGOS_PERFIL                 VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA               INTEGER,

     OUT   PO_MENSAJE_RESPUESTA              VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

--* Input: PI_CODIGOS_PERFIL - CÃ³digos del Perfil a listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/04/2014

--* Fec. Actualizacion: 08/04/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PERFIL_MODULO_WEB_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

      PMW.CODIGO_PERFIL,

      PMW.CODIGO_MODULO_WEB,

      MOW.DESCRIPCION,

      MOW.URL,

      PMW.INDICADOR_VISIBLE_DEFECTO,

      MOW.ORDEN

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB  PMW,

      BFP_PORTAL.BFPBM_MODULO_WEB         MOW,

	  BFP_PORTAL.BFPBM_PERFIL             PER

    WHERE 

      PMW.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PMW.CODIGO_MODULO_WEB = MOW.CODIGO_MODULO_WEB  AND

	  PMW.CODIGO_PERFIL = PER.CODIGO_PERFIL AND

      MOW.ESTADO = 1 AND

	  PMW.ESTADO = 1 AND

	  PER.ESTADO = 1

    ORDER BY MOW.ORDEN';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS"

  (

     IN    PI_CODIGOS_PERFIL              VARCHAR(500),

	 IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input: PI_CODIGOS_PERFIL - Códigos del Perfil a listar

--* Input: PI_CODIGO_MODULO_WEB - Codigo del Modulo Web a Listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/04/2014

--* Fec. Actualizacion: 08/04/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2500);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

   SELECT DISTINCT

      UNNE.CODIGO_UNIDAD_NEGOCIO  AS UND_CODIGO_UNIDAD_NEGOCIO,

      UNNE.DESCRIPCION            AS UND_DESCRIPCION,

      UNNE.URL                    AS UND_URL,

      PROD.CODIGO_PRODUCTO        AS PRD_CODIGO_PRODUCTO,

      PROD.DESCRIPCION            AS PRD_DESCRIPCION,

      PROD.URL                    AS PRD_URL,

      PROS.CODIGO_PROCESO         AS PRO_CODIGO_PROCESO,

      PROS.DESCRIPCION            AS PRO_DESCRIPCION,

      PROS.URL                    AS PRO_URL,

	  PROS.VERSION				  AS PRO_VERSION,

	  PROS.NOMBRE_PROCESO		  AS PRO_NOMBRE_PROCESO,

	  PROS.NAMESPACE		 	  AS PRO_NAMESPACE,

      PUNP.CODIGO_MODULO_WEB

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB      PUNP,

      BFP_PORTAL.BFPBM_PROCESO                        PROS,

      BFP_PORTAL.BFPBM_PERFIL                         PERF,

      BFP_PORTAL.BFPBM_PRODUCTO                       PROD,

      BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO                 UNNE

    WHERE 

      PUNP.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PUNP.CODIGO_MODULO_WEB     = '''||PI_CODIGO_MODULO_WEB||''' AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROS.CODIGO_UNIDAD_NEGOCIO  AND

      PUNP.CODIGO_PRODUCTO       = PROS.CODIGO_PRODUCTO  AND

      PUNP.CODIGO_PROCESO        = PROS.CODIGO_PROCESO  AND

      PUNP.CODIGO_PERFIL         = PERF.CODIGO_PERFIL AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROD.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.CODIGO_PRODUCTO       = PROD.CODIGO_PRODUCTO AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = UNNE.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.ESTADO                = 1 AND

      PERF.ESTADO                = 1 AND

      PROS.ESTADO                = 1';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_B"

  (

     IN    PI_CODIGOS_PERFIL              VARCHAR(3000),

	 IN    PI_CODIGO_MODULO_WEB           VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_B

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input: PI_CODIGOS_PERFIL - CÃ³digos del Perfil a listar

--* Input: PI_CODIGO_MODULO_WEB - Codigo del Modulo Web a Listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/04/2014

--* Fec. Actualizacion: 08/04/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_B"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2500);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_B": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

   SELECT DISTINCT

      UNNE.CODIGO_UNIDAD_NEGOCIO  AS UND_CODIGO_UNIDAD_NEGOCIO,

      UNNE.DESCRIPCION            AS UND_DESCRIPCION,

      UNNE.URL                    AS UND_URL,

      PROD.CODIGO_PRODUCTO        AS PRD_CODIGO_PRODUCTO,

      PROD.DESCRIPCION            AS PRD_DESCRIPCION,

      PROD.URL                    AS PRD_URL,

      PROS.CODIGO_PROCESO         AS PRO_CODIGO_PROCESO,

      PROS.DESCRIPCION            AS PRO_DESCRIPCION,

      PROS.URL                    AS PRO_URL,

	  PROS.VERSION				  AS PRO_VERSION,

	  PROS.NOMBRE_PROCESO		  AS PRO_NOMBRE_PROCESO,

	  PROS.NAMESPACE		 	  AS PRO_NAMESPACE

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB      PUNP,

      BFP_PORTAL.BFPBM_PROCESO                        PROS,

      BFP_PORTAL.BFPBM_PERFIL                         PERF,

      BFP_PORTAL.BFPBM_PRODUCTO                       PROD,

      BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO                 UNNE

    WHERE 

      PUNP.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PUNP.CODIGO_MODULO_WEB IN ('||PI_CODIGO_MODULO_WEB||') AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROS.CODIGO_UNIDAD_NEGOCIO  AND

      PUNP.CODIGO_PRODUCTO       = PROS.CODIGO_PRODUCTO  AND

      PUNP.CODIGO_PROCESO        = PROS.CODIGO_PROCESO  AND

      PUNP.CODIGO_PERFIL         = PERF.CODIGO_PERFIL AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROD.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.CODIGO_PRODUCTO       = PROD.CODIGO_PRODUCTO AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = UNNE.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.ESTADO                = 1 AND

      PERF.ESTADO                = 1 AND

      PROS.ESTADO                = 1';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_PROCESO_PERFIL_LIS"

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGOS_PERFIL              VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_PERFIL_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PROCESO_PERFIL

--* Input: PI_CODIGOS_PERFIL - CÃ³digo(s) del Perfil(es)

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 15/10/2014

--* Fec. Actualizacion: 15/10/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_PROCESO_PERFIL_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_PERFIL_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

	  CODIGO_PROCESO, CODIGO_PRODUCTO, CODIGO_UNIDAD_NEGOCIO, CODIGO_PERFIL

	FROM

	  BFP_PORTAL.BFPBM_PROCESO_PERFIL

    WHERE 

	  CODIGO_UNIDAD_NEGOCIO = '''||PI_CODIGO_UNIDAD_NEGOCIO||''' AND

      CODIGO_PRODUCTO = '''||PI_CODIGO_PRODUCTO||''' AND

      CODIGO_PROCESO = '''||PI_CODIGO_PROCESO||''' AND

      CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||')';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_TAREA_LIS"

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_TAREA                VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_TAREA

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - CÃ³digo de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - CÃ³digo de Producto asociado

--* Input: PI_CODIGO_PROCESO - CÃ³digo de Proceso asociado

--* Input: PI_CODIGO_TAREA - CÃ³digo de Tarea

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_TAREA_LIS"

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;--

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, CODIGO_TAREA, DESCRIPCION, URL, VERSION, TIEMPO_ROJO, TIEMPO_AMARILLO, NAMESPACE, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_TAREA

		WHERE 1 = 1

			AND (PI_CODIGO_UNIDAD_NEGOCIO IS NULL OR CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO)

			AND (PI_CODIGO_PRODUCTO IS NULL OR CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO)

			AND (PI_CODIGO_PROCESO IS NULL OR CODIGO_PROCESO = PI_CODIGO_PROCESO)

			AND (PI_CODIGO_TAREA IS NULL OR CODIGO_TAREA = PI_CODIGO_TAREA);--

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

	SET PO_CODIGO_RESPUESTA = 1;--

	OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_TAREA_PERFIL_LIS"

  (

     IN    PI_CODIGO_TAREA                VARCHAR(70),

     IN    PI_CODIGOS_PERFIL              VARCHAR(3000),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_PERFIL_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_TAREA_PERFIL

--* Input: PI_CODIGO_TAREA - CÃ³digo de la tarea

--* Input: PI_CODIGOS_PERFIL - CÃ³digo(s) del Perfil(es)

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 15/10/2014

--* Fec. Actualizacion: 15/10/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_TAREA_PERFIL_LIS"

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_PERFIL_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

	  CODIGO_TAREA, CODIGO_PERFIL

	FROM

	  BFP_PORTAL.BFPBM_TAREA_PERFIL

    WHERE 

      CODIGO_TAREA = '''||PI_CODIGO_TAREA||''' AND

      CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||')';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_TAREA_PERFIL_SEL" (

    IN PI_CODIGOS_PERFIL	VARCHAR(3000),

    OUT PO_CODIGO_RESPUESTA	INTEGER,

    OUT PO_MENSAJE_RESPUESTA	VARCHAR(200) )

  SPECIFIC "BFP_PORTAL"."SP_BFPBM_TAREA_PERFIL_SEL"

  DYNAMIC RESULT SETS 1

  LANGUAGE SQL

  NOT DETERMINISTIC

  EXTERNAL ACTION

  MODIFIES SQL DATA

  CALLED ON NULL INPUT

  INHERIT SPECIAL REGISTERS

  OLD SAVEPOINT LEVEL

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_PERFIL_SEL

--* Proposito: Procedure que obtiene los codigos de tarea por perfiles

--* Input: PI_CODIGOS_PERFIL - CÃ?Â³digo(s) del Perfil(es)

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: HECMAN

--* Fec. Creacion: 25/06/2015

--* Fec. Actualizacion: 25/06/2015

--*******************************************************

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(2000);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_PERFIL_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  SET V_SQL = '

    SELECT 

	  CODIGO_TAREA

	FROM

	  BFP_PORTAL.BFPBM_TAREA_PERFIL

    WHERE       

      CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||')';--

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_USUARIO_ATRIBUTO_INS"

  (

     IN    PI_CODIGO_USUARIO              VARCHAR(50),

     IN    PI_CODIGO_ATRIBUTO             INTEGER,

     IN    PI_CODIGO_DESCRIPCION          VARCHAR(255),

     IN    PI_DESCRIPCION                 VARCHAR(255),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS

--* Input: PI_CODIGO_USUARIO - Descripcion

--* Input: PI_CODIGO_ATRIBUTO - URL de MÃ³dulo Web

--* Input: PI_CODIGO_DESCRIPCION - URL de MÃ³dulo Web

--* Input: PI_DESCRIPCION - Orden del MÃ³dulo Web

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_USUARIO_ATRIBUTO_INS"

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;--

	DECLARE TOTAL INT DEFAULT 0;--

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

	SET PO_CODIGO_RESPUESTA = 1;--

	

	SELECT COUNT(*) INTO TOTAL FROM BFP_PORTAL.BFPBM_USUARIO_ATRIBUTO WHERE CODIGO_USUARIO = PI_CODIGO_USUARIO AND CODIGO_ATRIBUTO = PI_CODIGO_ATRIBUTO;--

	

	IF TOTAL = 0 THEN

		INSERT INTO BFP_PORTAL.BFPBM_USUARIO_ATRIBUTO (CODIGO_USUARIO,CODIGO_ATRIBUTO,CODIGO_DESCRIPCION,DESCRIPCION)

		VALUES (PI_CODIGO_USUARIO,PI_CODIGO_ATRIBUTO,PI_CODIGO_DESCRIPCION,PI_DESCRIPCION);--

	ELSE 

		UPDATE BFP_PORTAL.BFPBM_USUARIO_ATRIBUTO SET CODIGO_DESCRIPCION = PI_CODIGO_DESCRIPCION, DESCRIPCION = PI_DESCRIPCION

		WHERE CODIGO_USUARIO = PI_CODIGO_USUARIO AND CODIGO_ATRIBUTO = PI_CODIGO_ATRIBUTO;--

	END IF;--

	

END;

CREATE OR REPLACE PROCEDURE "BFP_PORTAL"."SP_BFPBM_USUARIO_ATRIBUTO_SEL" (

  IN PI_CODIGO_USUARIO VARCHAR(50),

  OUT PO_CODIGO_RESPUESTA	INTEGER,

  OUT PO_MENSAJE_RESPUESTA	VARCHAR(200) )

--**************************************************************** 

--* Nombre SP: BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_SEL

--* Proposito: Es el procedure que obtiene LISTA

--* Input: PI_CODIGO_USUARIO - Codigo Usuario

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP  

--* Fecha. Creacion: 29/10/2014 

--* Fecha. Actualizacion: 29/10/2014

--****************************************************************

RESULT SETS 1

LANGUAGE SQL

SPECIFIC "BFP_PORTAL"."SP_BFPBM_USUARIO_ATRIBUTO_SEL"

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;--

 	DECLARE c1 CURSOR WITH RETURN FOR 

   	 SELECT CODIGO_USUARIO,CODIGO_ATRIBUTO,CODIGO_DESCRIPCION,DESCRIPCION

     FROM   BFP_PORTAL.BFPBM_USUARIO_ATRIBUTO

	   WHERE  CODIGO_USUARIO = PI_CODIGO_USUARIO;--

     DECLARE CONTINUE HANDLER FOR SQLEXCEPTION  

       BEGIN

         SET PO_CODIGO_RESPUESTA = 1;--

         SET PO_MENSAJE_RESPUESTA = 'ERROR EN BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_SEL: ' ||  CAST(SQLCODE AS CHAR(10)) ;--

       END;--

	SET PO_CODIGO_RESPUESTA = 1;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFCFM_PRE_SOLICITUD_INS

  (

     IN    PI_CODIGO             		VARCHAR(8),

	 IN	   PI_CODIGO_TIPO_DOCUMENTO     VARCHAR(4), 	

	 IN	   PI_NUMERO_DOCUMENTO          VARCHAR(16), 	

	 IN    PI_CODIGO_VENDEDOR           VARCHAR(50),

	 IN    PI_NOMBRE_VENDEDOR           VARCHAR(50)

  )

  

--*******************************************************

--* Nombre SP:  BFP_PORTAL.BFCFM_PRE_SOLICITUD

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFCFM_PRE_SOLICITUD

--* Input/Output: 

--* Input: PI_CODIGO -

--* Input: PI_CODIGO_TIPO_DOCUMENTO -

--* Input: PI_NUMERO_DOCUMENTO -

--* Input: PI_CODIGO_VENDEDOR -

--* Input: PI_NOMBRE_VENDEDOR -

--* Creado por: RHERNANDEZ 

--* Fec. Creacion: 08/05/2014

--* Fec. Actualizacion: 08/05/2014

--*******************************************************

BEGIN

		

	INSERT INTO BFP_PORTAL.BFCFM_PRE_SOLICITUD(CODIGO,CODIGO_TIPO_DOCUMENTO,NUMERO_DOCUMENTO,CODIGO_VENDEDOR,NOMBRE_VENDEDOR)

	VALUES (PI_CODIGO,PI_CODIGO_TIPO_DOCUMENTO,PI_NUMERO_DOCUMENTO,PI_CODIGO_VENDEDOR,PI_NOMBRE_VENDEDOR);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_MODULO_WEB

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_MODULO_WEB

		 WHERE CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_MODULO_WEB          VARCHAR(8),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_ORDEN                       SMALLINT,

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_MODULO_WEB

--* Input/Output: PIO_CODIGO_MODULO_WEB - Código de Módulo Web

--* Input: PI_DESCRIPCION - Descripcion

--* Input: PI_URL - URL de Módulo Web

--* Input: PI_ORDEN - Orden del Módulo Web

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_MODULO_WEB (CODIGO_MODULO_WEB,DESCRIPCION,URL,ORDEN,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_MODULO_WEB,PI_DESCRIPCION,PI_URL,PI_ORDEN,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_MODULO_WEB_LIS

  (

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_MODULO_WEB_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_MODULO_WEB

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_MODULO_WEB, DESCRIPCION, URL, ORDEN, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_MODULO_WEB

		WHERE 1 = 1

			AND (PI_CODIGO_MODULO_WEB IS NULL OR CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_MODULO_WEB

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_MODULO_WEB, DESCRIPCION, URL, ORDEN, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_MODULO_WEB

		WHERE CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_ORDEN                       SMALLINT,

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_MODULO_WEB

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web

--* Input: PI_DESCRIPCION - Descripcion

--* Input: PI_URL - URL de Módulo Web

--* Input: PI_ORDEN - Orden del Módulo Web

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_MODULO_WEB

	SET DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, ORDEN = PI_ORDEN, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_DEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input: PI_CODIGO_PERFIL - Código del Perfil

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_INS

  (

     INOUT PIO_CODIGO_PERFIL              VARCHAR(50),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil

--* Input: PI_DESCRIPCION - Descripción del Perfil

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL (CODIGO_PERFIL,DESCRIPCION,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PI_DESCRIPCION,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_LIS

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input: PI_CODIGO_PERFIL - Código del Perfil

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, DESCRIPCION, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL

		WHERE 1 = 1

			AND (PI_CODIGO_PERFIL IS NULL OR CODIGO_PERFIL = PI_CODIGO_PERFIL);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_PERFIL                   VARCHAR(50),

     IN    PI_CODIGO_MODULO_WEB               VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA                INTEGER,

     OUT   PO_MENSAJE_RESPUESTA               VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_PERFIL                  VARCHAR(20),

     INOUT PIO_CODIGO_MODULO_WEB              VARCHAR(8),

     IN    PI_INDICADOR_VISIBLE_DEFECTO       CHAR(1),

     IN    PI_ESTADO                          CHAR(1),

     IN    PI_USUARIO_CREACION                VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA                INTEGER,

     OUT   PO_MENSAJE_RESPUESTA               VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil Asociado

--* Input/Output: PIO_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_INDICADOR_VISIBLE_DEFECTO - Indicador si el Módulo esta activo por defecto  (1: Activo, 0: Inactivo)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB (CODIGO_PERFIL,CODIGO_MODULO_WEB,INDICADOR_VISIBLE_DEFECTO,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PIO_CODIGO_MODULO_WEB,PI_INDICADOR_VISIBLE_DEFECTO,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_PERFIL                   VARCHAR(50),

     IN    PI_CODIGO_MODULO_WEB               VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA                INTEGER,

     OUT   PO_MENSAJE_RESPUESTA               VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, CODIGO_MODULO_WEB, INDICADOR_VISIBLE_DEFECTO, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_PERFIL                   VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB               VARCHAR(8),

     IN    PI_INDICADOR_VISIBLE_DEFECTO       CHAR(1),

     IN    PI_ESTADO                          CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION           VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION             TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA                INTEGER,

     OUT   PO_MENSAJE_RESPUESTA               VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_INDICADOR_VISIBLE_DEFECTO - Indicador si el Módulo esta activo por defecto  (1: Activo, 0: Inactivo)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL_MODULO_WEB

	SET INDICADOR_VISIBLE_DEFECTO = PI_INDICADOR_VISIBLE_DEFECTO, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_PERFIL              VARCHAR(50),

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     INOUT PIO_CODIGO_PROCESO             VARCHAR(20),

     INOUT PIO_CODIGO_MODULO_WEB          VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil Asociado

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código de Producto asociado

--* Input/Output: PIO_CODIGO_PROCESO - Código de Proceso asociado

--* Input/Output: PIO_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB (CODIGO_PERFIL,CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_MODULO_WEB,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_PRODUCTO,PIO_CODIGO_PROCESO,PIO_CODIGO_MODULO_WEB,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_2 (
    IN PI_CODIGOS_PERFIL	VARCHAR(3000),
    IN PI_CODIGO_MODULO_WEB	VARCHAR(3000))
  SPECIFIC SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS_2
  DYNAMIC RESULT SETS 1
  LANGUAGE SQL
  NOT DETERMINISTIC
  EXTERNAL ACTION
  MODIFIES SQL DATA
  CALLED ON NULL INPUT
  INHERIT SPECIAL REGISTERS
  OLD SAVEPOINT LEVEL
--*******************************************************
--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS
--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB
--* Input: PI_CODIGOS_PERFIL - CÃ³digos del Perfil a listar
--* Input: PI_CODIGO_MODULO_WEB - Codigo del Modulo Web a Listar
--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta
--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta
--* Creado por: OSCHUP
--* Fec. Creacion: 08/04/2014
--* Fec. Actualizacion: 08/04/2014
--*******************************************************
BEGIN
  DECLARE SQLCODE INT DEFAULT 0;--
  DECLARE V_DINAMICO VARCHAR(500);--
  DECLARE V_SQL VARCHAR(2500);--
  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--
  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 
	BEGIN 
--		SET PO_CODIGO_RESPUESTA = 0;--
--		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--
	END;--
--  SET PO_CODIGO_RESPUESTA = 1;--
  SET V_SQL = '
   SELECT DISTINCT
      UNNE.CODIGO_UNIDAD_NEGOCIO  AS UND_CODIGO_UNIDAD_NEGOCIO,
      UNNE.DESCRIPCION            AS UND_DESCRIPCION,
      UNNE.URL                    AS UND_URL,
      PROD.CODIGO_PRODUCTO        AS PRD_CODIGO_PRODUCTO,
      PROD.DESCRIPCION            AS PRD_DESCRIPCION,
      PROD.URL                    AS PRD_URL,
      PROS.CODIGO_PROCESO         AS PRO_CODIGO_PROCESO,
      PROS.DESCRIPCION            AS PRO_DESCRIPCION,
      PROS.URL                    AS PRO_URL,
	  PROS.VERSION				  AS PRO_VERSION,
	  PROS.NOMBRE_PROCESO		  AS PRO_NOMBRE_PROCESO,
	  PROS.NAMESPACE		 	  AS PRO_NAMESPACE
    FROM 
      BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB      PUNP,
      BFP_PORTAL.BFPBM_PROCESO                        PROS,
      BFP_PORTAL.BFPBM_PERFIL                         PERF,
      BFP_PORTAL.BFPBM_PRODUCTO                       PROD,
      BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO                 UNNE
    WHERE 
      PUNP.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND
      PUNP.CODIGO_MODULO_WEB IN ('||PI_CODIGO_MODULO_WEB||') AND
      PUNP.CODIGO_UNIDAD_NEGOCIO = PROS.CODIGO_UNIDAD_NEGOCIO  AND
      PUNP.CODIGO_PRODUCTO       = PROS.CODIGO_PRODUCTO  AND
      PUNP.CODIGO_PROCESO        = PROS.CODIGO_PROCESO  AND
      PUNP.CODIGO_PERFIL         = PERF.CODIGO_PERFIL AND
      PUNP.CODIGO_UNIDAD_NEGOCIO = PROD.CODIGO_UNIDAD_NEGOCIO AND
      PUNP.CODIGO_PRODUCTO       = PROD.CODIGO_PRODUCTO AND
      PUNP.CODIGO_UNIDAD_NEGOCIO = UNNE.CODIGO_UNIDAD_NEGOCIO AND
      PUNP.ESTADO                = 1 AND
      PERF.ESTADO                = 1 AND
      PROS.ESTADO                = 1';--
  PREPARE V_DINAMICO FROM V_SQL;--
  OPEN c1;--
END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, CODIGO_MODULO_WEB, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL_PROCESO_MODULO_WEB

	SET ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_DEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_INS

  (

     INOUT PIO_CODIGO_PERFIL              VARCHAR(20),

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     INOUT PIO_CODIGO_PROCESO             VARCHAR(20),

     INOUT PIO_CODIGO_MODULO_WEB          VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil Asociado

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código de Producto asociado

--* Input/Output: PIO_CODIGO_PROCESO - Código de Proceso asociado

--* Input/Output: PIO_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO (CODIGO_PERFIL,CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_MODULO_WEB,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_PRODUCTO,PIO_CODIGO_PROCESO,PIO_CODIGO_MODULO_WEB,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_LIS

  (

     IN    PI_CODIGOS_PERFIL              VARCHAR(500),

	 IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

--* Input: PI_CODIGOS_PERFIL - Códigos del Perfil a listar

--* Input: PI_CODIGO_MODULO_WEB - Codigo del Modulo Web a Listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/04/2014

--* Fec. Actualizacion: 08/04/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;

  DECLARE V_DINAMICO VARCHAR(500);

  DECLARE V_SQL VARCHAR(2500);

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

  SET PO_CODIGO_RESPUESTA = 1;

  SET V_SQL = '

   SELECT DISTINCT

      UNNE.CODIGO_UNIDAD_NEGOCIO  AS UND_CODIGO_UNIDAD_NEGOCIO,

      UNNE.DESCRIPCION            AS UND_DESCRIPCION,

      UNNE.URL                    AS UND_URL,

      PROD.CODIGO_PRODUCTO        AS PRD_CODIGO_PRODUCTO,

      PROD.DESCRIPCION            AS PRD_DESCRIPCION,

      PROD.URL                    AS PRD_URL,

      PROS.CODIGO_PROCESO         AS PRO_CODIGO_PROCESO,

      PROS.DESCRIPCION            AS PRO_DESCRIPCION,

      PROS.URL                    AS PRO_URL,

      PUNP.CODIGO_MODULO_WEB

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO  PUNP,

      BFP_PORTAL.BFPBM_PROCESO                        PROS,

      BFP_PORTAL.BFPBM_PERFIL                         PERF,

      BFP_PORTAL.BFPBM_PRODUCTO                       PROD,

      BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO                 UNNE

    WHERE 

      PUNP.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PUNP.CODIGO_MODULO_WEB = '''||PI_CODIGO_MODULO_WEB||''' AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROS.CODIGO_UNIDAD_NEGOCIO  AND

      PUNP.CODIGO_PRODUCTO       = PROS.CODIGO_PRODUCTO  AND

      PUNP.CODIGO_PROCESO        = PROS.CODIGO_PROCESO  AND

      PUNP.CODIGO_PERFIL         = PERF.CODIGO_PERFIL AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = PROD.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.CODIGO_PRODUCTO       = PROD.CODIGO_PRODUCTO AND

      PUNP.CODIGO_UNIDAD_NEGOCIO = UNNE.CODIGO_UNIDAD_NEGOCIO AND

      PUNP.ESTADO                = 1 AND

      PERF.ESTADO                = 1 AND

      PROS.ESTADO                = 1';

  PREPARE V_DINAMICO FROM V_SQL;

  OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_SEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, CODIGO_MODULO_WEB, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_UPD

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO

	SET ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_PERFIL              VARCHAR(50),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_SUB_MODULO_WEB      VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil Asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código de Producto asociado

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input/Output: PIO_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB (CODIGO_PERFIL,CODIGO_PRODUCTO,CODIGO_UNIDAD_NEGOCIO,CODIGO_SUB_MODULO_WEB,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PIO_CODIGO_PRODUCTO,PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_SUB_MODULO_WEB,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_LIS (

    IN PI_CODIGOS_PERFIL	VARCHAR(3000),

    IN PI_CODIGO_UNIDAD	VARCHAR(8),

    IN PI_CODIGO_PRODUCTO	VARCHAR(20),

    IN PI_CODIGO_MODULO_WEB	VARCHAR(8),

    OUT PO_CODIGO_RESPUESTA	INTEGER,

    OUT PO_MENSAJE_RESPUESTA	VARCHAR(200) )

  SPECIFIC "SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_LIS"

  DYNAMIC RESULT SETS 1

  LANGUAGE SQL

  NOT DETERMINISTIC

  EXTERNAL ACTION

  MODIFIES SQL DATA

  CALLED ON NULL INPUT

  INHERIT SPECIAL REGISTERS

  OLD SAVEPOINT LEVEL

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;--

  DECLARE V_DINAMICO VARCHAR(500);--

  DECLARE V_SQL VARCHAR(4000);--

  DECLARE V_BUSCAR_CODIGO_UNIDAD VARCHAR(500);--

  DECLARE V_BUSCAR_PRODUCTO VARCHAR(500);--

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;--

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0;--

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ;--

	END;--

  SET PO_CODIGO_RESPUESTA = 1;--

  

  IF (PI_CODIGO_UNIDAD IS NULL OR PI_CODIGO_UNIDAD = '') THEN



     SET V_BUSCAR_CODIGO_UNIDAD = '';--

  ELSE 

     SET V_BUSCAR_CODIGO_UNIDAD = ' PSMW.CODIGO_UNIDAD_NEGOCIO = '''||PI_CODIGO_UNIDAD||''' AND ';--

  END IF;--

  

  IF (PI_CODIGO_PRODUCTO IS NULL OR PI_CODIGO_PRODUCTO = '') THEN

     SET V_BUSCAR_PRODUCTO = '';--

  ELSE 

     SET V_BUSCAR_PRODUCTO = ' PSMW.CODIGO_PRODUCTO = '''||PI_CODIGO_PRODUCTO||''' AND ';--

  END IF;--

  

  SET V_SQL = '

   SELECT DISTINCT

      PSMW.CODIGO_UNIDAD_NEGOCIO    AS CODIGO_UNIDAD_NEGOCIO,

      PSMW.CODIGO_PRODUCTO          AS CODIGO_PRODUCTO,

      SUMW.CODIGO_SUB_MODULO_WEB    AS CODIGO_SUB_MODULO_WEB,

      SUMW.DESCRIPCION 				AS DESCRIPCION,

      SUMW.URL						AS URL

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB PSMW,

	  BFP_PORTAL.BFPBM_SUB_MODULO_WEB				  SUMW,

      BFP_PORTAL.BFPBM_PERFIL                         PERF,

      BFP_PORTAL.BFPBM_PRODUCTO                       PROD,

      BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO                 UNNE

    WHERE 

      PSMW.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      SUMW.CODIGO_MODULO_WEB = '''||PI_CODIGO_MODULO_WEB||''' AND

      '||V_BUSCAR_CODIGO_UNIDAD||'

	  '||V_BUSCAR_PRODUCTO||'

	  PSMW.CODIGO_PERFIL         = PERF.CODIGO_PERFIL AND

      PSMW.CODIGO_SUB_MODULO_WEB = SUMW.CODIGO_SUB_MODULO_WEB AND

	  PSMW.CODIGO_UNIDAD_NEGOCIO = PROD.CODIGO_UNIDAD_NEGOCIO AND

      PSMW.CODIGO_PRODUCTO       = PROD.CODIGO_PRODUCTO AND

      PSMW.CODIGO_UNIDAD_NEGOCIO = UNNE.CODIGO_UNIDAD_NEGOCIO AND

      PSMW.ESTADO                = 1 AND

      PERF.ESTADO                = 1 AND

      PROD.ESTADO                = 1

    ORDER BY SUMW.DESCRIPCION';--

	  

  PREPARE V_DINAMICO FROM V_SQL;--

  OPEN c1;--

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, CODIGO_PRODUCTO, CODIGO_UNIDAD_NEGOCIO, CODIGO_SUB_MODULO_WEB, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de Unidad de Negocio asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB

	SET ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input: PI_CODIGO_PERFIL - Código del Perfil

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/08/2014

--* Fec. Actualizacion: 08/08/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, DESCRIPCION, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

		 WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_PERFIL              VARCHAR(20),

     INOUT PIO_CODIGO_SUB_MODULO_WEB      VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

--* Input/Output: PIO_CODIGO_PERFIL - Código del Perfil Asociado

--* Input/Output: PIO_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB (CODIGO_PERFIL,CODIGO_SUB_MODULO_WEB,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_PERFIL,PIO_CODIGO_SUB_MODULO_WEB,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_LIS

  (

     IN    PI_CODIGOS_PERFIL               VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

--* Input: PI_CODIGOS_PERFIL - Códigos del Perfil a listar

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/04/2014

--* Fec. Actualizacion: 08/04/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

  DECLARE SQLCODE INT DEFAULT 0;

  DECLARE V_DINAMICO VARCHAR(500);

  DECLARE V_SQL VARCHAR(2000);

  DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO;

  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

  SET PO_CODIGO_RESPUESTA = 1;

  SET V_SQL = '

    SELECT 

      PMW.CODIGO_PERFIL,

      PMW.CODIGO_SUB_MODULO_WEB,

      SMW.DESCRIPCION,

      SMW.URL,

      SMW.ORDEN

    FROM 

      BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB  PMW,

      BFP_PORTAL.BFPBM_SUB_MODULO_WEB         SMW,

      BFP_PORTAL.BFPBM_PERFIL                 PER

    WHERE 

      PMW.CODIGO_PERFIL IN ('||PI_CODIGOS_PERFIL||') AND

      PMW.CODIGO_SUB_MODULO_WEB = SMW.CODIGO_SUB_MODULO_WEB  AND

	  PMW.CODIGO_PERFIL = PER.CODIGO_PERFIL AND

      SMW.ESTADO = 1 AND

	  PMW.ESTADO = 1 AND

	  PER.ESTADO = 1

    ORDER BY SMW.ORDEN';

  PREPARE V_DINAMICO FROM V_SQL;

  OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_PERFIL, CODIGO_SUB_MODULO_WEB, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

		WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

--* Input: PI_CODIGO_PERFIL - Código del Perfil Asociado

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Asociado

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_SUB_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL_SUB_MODULO_WEB

	SET ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL AND CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PERFIL_UPD

  (

     IN    PI_CODIGO_PERFIL               VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PERFIL_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PERFIL

--* Input: PI_CODIGO_PERFIL - Código del Perfil

--* Input: PI_DESCRIPCION - Descripción del Perfil

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PERFIL_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PERFIL

	SET DESCRIPCION = PI_DESCRIPCION, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_PERFIL = PI_CODIGO_PERFIL ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PROCESO_DEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PROCESO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código del proceso

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PROCESO

		 WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PROCESO_INS

  (

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     INOUT PIO_CODIGO_PROCESO             VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_NOMBRE_PROCESO              VARCHAR(100),

     IN    PI_NAMESPACE                   VARCHAR(200),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PROCESO

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código de Producto asociado

--* Input/Output: PIO_CODIGO_PROCESO - Código del proceso

--* Input: PI_DESCRIPCION - Descripción del Proceso

--* Input: PI_URL - URL de cada proceso

--* Input: PI_VERSION - Versión del Proceso

--* Input: PI_NOMBRE_PROCESO - Nombre del Proceso

--* Input: PI_NAMESPACE - Identificador

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PROCESO (CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,DESCRIPCION,URL,VERSION,NOMBRE_PROCESO,NAMESPACE,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_PRODUCTO,PIO_CODIGO_PROCESO,PI_DESCRIPCION,PI_URL,PI_VERSION,PI_NOMBRE_PROCESO,PI_NAMESPACE,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PROCESO_LIS

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PROCESO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código del proceso

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, DESCRIPCION, URL, VERSION, NOMBRE_PROCESO, NAMESPACE, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PROCESO

		WHERE 1 = 1

			AND (PI_CODIGO_UNIDAD_NEGOCIO IS NULL OR CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO)

			AND (PI_CODIGO_PRODUCTO IS NULL OR CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO)

			AND (PI_CODIGO_PROCESO IS NULL OR CODIGO_PROCESO = PI_CODIGO_PROCESO);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PROCESO_SEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PROCESO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código del proceso

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, DESCRIPCION, URL, VERSION, NOMBRE_PROCESO, NAMESPACE, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PROCESO

		WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PROCESO_UPD

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_NOMBRE_PROCESO              VARCHAR(100),

     IN    PI_NAMESPACE                   VARCHAR(200),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PROCESO_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PROCESO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código del proceso

--* Input: PI_DESCRIPCION - Descripción del Proceso

--* Input: PI_URL - URL de cada proceso

--* Input: PI_VERSION - Versión del Proceso

--* Input: PI_NOMBRE_PROCESO - Nombre del Proceso

--* Input: PI_NAMESPACE - Identificador

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PROCESO_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PROCESO

	SET DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, VERSION = PI_VERSION, NOMBRE_PROCESO = PI_NOMBRE_PROCESO, NAMESPACE = PI_NAMESPACE, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PRODUCTO_DEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PRODUCTO_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_PRODUCTO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código del producto

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PRODUCTO_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_PRODUCTO

		 WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PRODUCTO_INS

  (

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PRODUCTO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_PRODUCTO

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código del producto

--* Input: PI_DESCRIPCION - Descripción del Producto

--* Input: PI_URL - URL de cada producto

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PRODUCTO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_PRODUCTO (CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,DESCRIPCION,URL,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_PRODUCTO,PI_DESCRIPCION,PI_URL,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PRODUCTO_LIS

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PRODUCTO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_PRODUCTO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código del producto

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, DESCRIPCION, URL, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PRODUCTO

		WHERE 1 = 1

			AND (PI_CODIGO_UNIDAD_NEGOCIO IS NULL OR CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO)

			AND (PI_CODIGO_PRODUCTO IS NULL OR CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PRODUCTO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PRODUCTO_SEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PRODUCTO_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_PRODUCTO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código del producto

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, DESCRIPCION, URL, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_PRODUCTO

		WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PRODUCTO_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_PRODUCTO_UPD

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_PRODUCTO_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_PRODUCTO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código del producto

--* Input: PI_DESCRIPCION - Descripción del Producto

--* Input: PI_URL - URL de cada producto

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_PRODUCTO_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_PRODUCTO

	SET DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_DEL

  (

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_SUB_MODULO_WEB

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_SUB_MODULO_WEB

		 WHERE CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_INS

  (

     INOUT PIO_CODIGO_SUB_MODULO_WEB      VARCHAR(8),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         CHAR(5),

     IN    PI_ORDEN                       SMALLINT,

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_SUB_MODULO_WEB

--* Input/Output: PIO_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Web

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_DESCRIPCION - Descripcion del Sub Módulo Web

--* Input: PI_URL - Url del Sub Módulo Web

--* Input: PI_ORDEN - Orden del Sub Módulo Web

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_SUB_MODULO_WEB (CODIGO_SUB_MODULO_WEB,CODIGO_MODULO_WEB,DESCRIPCION,URL,ORDEN,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_SUB_MODULO_WEB,PI_CODIGO_MODULO_WEB,PI_DESCRIPCION,PI_URL,PI_ORDEN,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_LIS

  (

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_SUB_MODULO_WEB

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_SUB_MODULO_WEB, CODIGO_MODULO_WEB, DESCRIPCION, URL, ORDEN, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_SUB_MODULO_WEB

		WHERE 1 = 1

			AND (PI_CODIGO_SUB_MODULO_WEB IS NULL OR CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_SEL

  (

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_SUB_MODULO_WEB

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Web

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_SUB_MODULO_WEB, CODIGO_MODULO_WEB, DESCRIPCION, URL, ORDEN, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_SUB_MODULO_WEB

		WHERE CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_UPD

  (

     IN    PI_CODIGO_SUB_MODULO_WEB       VARCHAR(8),

     IN    PI_CODIGO_MODULO_WEB           VARCHAR(8),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         CHAR(5),

     IN    PI_ORDEN                       SMALLINT,

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_SUB_MODULO_WEB

--* Input: PI_CODIGO_SUB_MODULO_WEB - Código del Sub Módulo Web

--* Input: PI_CODIGO_MODULO_WEB - Código de Módulo Web Asociado

--* Input: PI_DESCRIPCION - Descripcion del Sub Módulo Web

--* Input: PI_URL - Url del Sub Módulo Web

--* Input: PI_ORDEN - Orden del Sub Módulo Web

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_SUB_MODULO_WEB_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_SUB_MODULO_WEB

	SET CODIGO_MODULO_WEB = PI_CODIGO_MODULO_WEB, DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, ORDEN = PI_ORDEN, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_SUB_MODULO_WEB = PI_CODIGO_SUB_MODULO_WEB ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_TAREA_DEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_TAREA                VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_TAREA

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_TAREA - Código de Tarea

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_TAREA

		 WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_TAREA = PI_CODIGO_TAREA ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_TAREA_INS

  (

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     INOUT PIO_CODIGO_PRODUCTO            VARCHAR(20),

     INOUT PIO_CODIGO_PROCESO             VARCHAR(20),

     INOUT PIO_CODIGO_TAREA               VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_TIEMPO_ROJO                 INTEGER,

     IN    PI_TIEMPO_AMARILLO             INTEGER,

     IN    PI_NAMESPACE                   VARCHAR(20),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_TAREA

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input/Output: PIO_CODIGO_PRODUCTO - Código de Producto asociado

--* Input/Output: PIO_CODIGO_PROCESO - Código de Proceso asociado

--* Input/Output: PIO_CODIGO_TAREA - Código de Tarea

--* Input: PI_DESCRIPCION - Descripción de la Tarea

--* Input: PI_URL - URL de cada tarea (Ejm: tare)

--* Input: PI_VERSION - Versión de Tarea (Ejm: 1.0.0)

--* Input: PI_TIEMPO_ROJO - Tiempo en segundos que debe pasar para que la tarea se vuelva Rojo

--* Input: PI_TIEMPO_AMARILLO - Tiempo en segundos que debe pasar para que la tarea se vuelva Amarillo

--* Input: PI_NAMESPACE - NAMESPACE de la tarea (Identificador para cada pagina)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_TAREA (CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_TAREA,DESCRIPCION,URL,VERSION,TIEMPO_ROJO,TIEMPO_AMARILLO,NAMESPACE,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_UNIDAD_NEGOCIO,PIO_CODIGO_PRODUCTO,PIO_CODIGO_PROCESO,PIO_CODIGO_TAREA,PI_DESCRIPCION,PI_URL,PI_VERSION,PI_TIEMPO_ROJO,PI_TIEMPO_AMARILLO,PI_NAMESPACE,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_TAREA_SEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_TAREA                VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_TAREA

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_TAREA - Código de Tarea

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, CODIGO_PRODUCTO, CODIGO_PROCESO, CODIGO_TAREA, DESCRIPCION, URL, VERSION, TIEMPO_ROJO, TIEMPO_AMARILLO, NAMESPACE, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_TAREA

		WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_TAREA = PI_CODIGO_TAREA ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_TAREA_UPD

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_CODIGO_PRODUCTO             VARCHAR(20),

     IN    PI_CODIGO_PROCESO              VARCHAR(20),

     IN    PI_CODIGO_TAREA                VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_TIEMPO_ROJO                 INTEGER,

     IN    PI_TIEMPO_AMARILLO             INTEGER,

     IN    PI_NAMESPACE                   VARCHAR(20),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_TAREA_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_TAREA

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio Asociado

--* Input: PI_CODIGO_PRODUCTO - Código de Producto asociado

--* Input: PI_CODIGO_PROCESO - Código de Proceso asociado

--* Input: PI_CODIGO_TAREA - Código de Tarea

--* Input: PI_DESCRIPCION - Descripción de la Tarea

--* Input: PI_URL - URL de cada tarea (Ejm: tare)

--* Input: PI_VERSION - Versión de Tarea (Ejm: 1.0.0)

--* Input: PI_TIEMPO_ROJO - Tiempo en segundos que debe pasar para que la tarea se vuelva Rojo

--* Input: PI_TIEMPO_AMARILLO - Tiempo en segundos que debe pasar para que la tarea se vuelva Amarillo

--* Input: PI_NAMESPACE - NAMESPACE de la tarea (Identificador para cada pagina)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_TAREA_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_TAREA

	SET DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, VERSION = PI_VERSION, TIEMPO_ROJO = PI_TIEMPO_ROJO, TIEMPO_AMARILLO = PI_TIEMPO_AMARILLO, NAMESPACE = PI_NAMESPACE, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO AND CODIGO_PRODUCTO = PI_CODIGO_PRODUCTO AND CODIGO_PROCESO = PI_CODIGO_PROCESO AND CODIGO_TAREA = PI_CODIGO_TAREA ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_DEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_DEL

--* Proposito: Procedure que elimina un registro de la tabla BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_DEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

		 DELETE 

		 FROM BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

		 WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_INS

  (

     INOUT PIO_CODIGO_UNIDAD_NEGOCIO      VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_CREACION            VARCHAR(50),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

--* Input/Output: PIO_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio

--* Input: PI_DESCRIPCION - Descripcion de la Unidad de Negocio

--* Input: PI_URL - URL de la Unidad de Negocio

--* Input: PI_VERSION - Versión de la Unidad de Negocio (Ejm: 1.0.0)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_CREACION - Usuario de Creación

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO (CODIGO_UNIDAD_NEGOCIO,DESCRIPCION,URL,VERSION,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION)

	VALUES (PIO_CODIGO_UNIDAD_NEGOCIO,PI_DESCRIPCION,PI_URL,PI_VERSION,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_LIS

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_LIS

--* Proposito: Procedure que lista los registros de la tabla BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, DESCRIPCION, URL, VERSION, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

		WHERE 1 = 1

			AND (PI_CODIGO_UNIDAD_NEGOCIO IS NULL OR CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO);

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_LIS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_SEL

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_SEL

--* Proposito: Procedure que selecciona un registro de la tabla BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE c1 CURSOR WITH RETURN FOR 

		SELECT CODIGO_UNIDAD_NEGOCIO, DESCRIPCION, URL, VERSION, ESTADO, USUARIO_CREACION, FECHA_CREACION, USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION

		FROM BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

		WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO ;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_SEL": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_UPD

  (

     IN    PI_CODIGO_UNIDAD_NEGOCIO       VARCHAR(20),

     IN    PI_DESCRIPCION                 VARCHAR(100),

     IN    PI_URL                         VARCHAR(100),

     IN    PI_VERSION                     CHAR(17),

     IN    PI_ESTADO                      CHAR(1),

     IN    PI_USUARIO_ACTUALIZACION       VARCHAR(50),

     IN    PI_FECHA_ACTUALIZACION         TIMESTAMP,

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_UPD

--* Proposito: Procedure que Actualiza un registro de la tabla BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

--* Input: PI_CODIGO_UNIDAD_NEGOCIO - Código de la Unidad de Negocio

--* Input: PI_DESCRIPCION - Descripcion de la Unidad de Negocio

--* Input: PI_URL - URL de la Unidad de Negocio

--* Input: PI_VERSION - Versión de la Unidad de Negocio (Ejm: 1.0.0)

--* Input: PI_ESTADO - Estado (1: Activo, 0: Inactivo)

--* Input: PI_USUARIO_ACTUALIZACION - Usuario de Actualización

--* Input: PI_FECHA_ACTUALIZACION - Fecha de Actualización

--* Output: PO_CODIGO_RESPUESTA - Codigo de respuesta

--* Output: PO_MENSAJE_RESPUESTA - Mensaje de respuesta

--* Creado por: OSCHUP

--* Fec. Creacion: 08/06/2014

--* Fec. Actualizacion: 08/06/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_UNIDAD_NEGOCIO_UPD": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	UPDATE BFP_PORTAL.BFPBM_UNIDAD_NEGOCIO

	SET DESCRIPCION = PI_DESCRIPCION, URL = PI_URL, VERSION = PI_VERSION, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO ;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS

  (

     IN    PI_CODIGO_USUARIO              VARCHAR(50),

     IN    PI_CODIGO_ATRIBUTO             INTEGER,

     IN    PI_DESCRIPCION                 VARCHAR(255),

     OUT   PO_CODIGO_RESPUESTA            INTEGER,

     OUT   PO_MENSAJE_RESPUESTA           VARCHAR(200)

  )

--*******************************************************

--* Nombre SP: BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS

--* Proposito: Procedure que inserta un registro a la tabla BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS

--* Input: PI_CODIGO_USUARIO - Descripcion

--* Input: PI_CODIGO_ATRIBUTO - URL de Módulo Web

--* Input: PI_DESCRIPCION - Orden del Módulo Web

--* Creado por: OSCHUP

--* Fec. Creacion: 08/22/2014

--* Fec. Actualizacion: 08/22/2014

--*******************************************************

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE CONTINUE HANDLER FOR SQLEXCEPTION 

	BEGIN 

		SET PO_CODIGO_RESPUESTA = 0; 

		SET PO_MENSAJE_RESPUESTA = 'ERROR EN "BFP_PORTAL.SP_BFPBM_USUARIO_ATRIBUTO_INS": ' ||  CAST(SQLCODE AS CHAR(10)) ; 

	END;

	SET PO_CODIGO_RESPUESTA = 1;

	INSERT INTO BFP_PORTAL.BFPBM_USUARIO_ATRIBUTO (CODIGO_USUARIO,CODIGO_ATRIBUTO,DESCRIPCION)

	VALUES (PI_CODIGO_USUARIO,PI_CODIGO_ATRIBUTO,PI_DESCRIPCION);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_DEL (

	IN PI_CODIGO_TAREA VARCHAR(70)

)

	SPECIFIC BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_DEL

BEGIN

	DELETE FROM BFP_PORTAL.BFPBM_TAREA WHERE 

		CODIGO_TAREA = PI_CODIGO_TAREA;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_INS (

	IN PI_CODIGO_UNIDAD_NEGOCIO VARCHAR(20),

	IN PI_CODIGO_PRODUCTO VARCHAR(20),

	IN PI_CODIGO_PROCESO VARCHAR(20),

	IN PI_CODIGO_TAREA VARCHAR(70),

	IN PI_DESCRIPCION VARCHAR(100),

	IN PI_URL VARCHAR(100),

	IN PI_VERSION VARCHAR(17),

	IN PI_TIEMPO_ROJO INTEGER,

	IN PI_TIEMPO_AMARILLO INTEGER,

	IN PI_NAMESPACE VARCHAR(20),

	IN PI_ESTADO CHAR(1),

	IN PI_USUARIO_CREACION VARCHAR(50)

)

	SPECIFIC BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_INS

BEGIN

	INSERT INTO BFP_PORTAL.BFPBM_TAREA (

		CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_TAREA,DESCRIPCION,URL,VERSION,TIEMPO_ROJO,TIEMPO_AMARILLO,NAMESPACE,ESTADO,USUARIO_CREACION,FECHA_CREACION,USUARIO_ACTUALIZACION,FECHA_ACTUALIZACION

	) VALUES (

		PI_CODIGO_UNIDAD_NEGOCIO,PI_CODIGO_PRODUCTO,PI_CODIGO_PROCESO,PI_CODIGO_TAREA,PI_DESCRIPCION,PI_URL,PI_VERSION,PI_TIEMPO_ROJO,PI_TIEMPO_AMARILLO,PI_NAMESPACE,PI_ESTADO,PI_USUARIO_CREACION,CURRENT TIMESTAMP,PI_USUARIO_CREACION,CURRENT TIMESTAMP

	);

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_LIS (

	IN  PI_CODIGO_UNIDAD_NEGOCIO VARCHAR(20),

	IN  PI_CODIGO_PRODUCTO VARCHAR(20),

	IN  PI_CODIGO_PROCESO VARCHAR(20),

	IN  PI_CODIGO_TAREA VARCHAR(70),

  IN  PI_ESTADO CHAR(8),

	IN  PI_PAGINADO_INDICE INTEGER,

	IN  PI_PAGINADO_CANTIDAD INTEGER,

	IN  PI_ORDEN VARCHAR(5),

	IN  PI_INDICADOR_CARGA_TOTAL INTEGER,

	OUT PO_TOTAL_SOLICITUDES INTEGER

)

RESULT SETS 1

LANGUAGE SQL

BEGIN

	DECLARE SQLCODE INT DEFAULT 0;

	DECLARE V_DINAMICO_c1 VARCHAR(4000);

	DECLARE V_DINAMICO_c2 VARCHAR(4000);

	DECLARE V_SQL_QUERY VARCHAR(4000);

	DECLARE V_SQL_PAGINACION VARCHAR(4000);

	DECLARE V_SQL_TOTAL VARCHAR(4000);

	DECLARE V_SQL_TOTAL_STR VARCHAR(5);

  DECLARE V_PI_ESTADO VARCHAR(50);

	DECLARE V_CANTIDAD VARCHAR(200);

	DECLARE c1 CURSOR WITH RETURN FOR V_DINAMICO_c1;

	DECLARE c2 CURSOR WITH RETURN FOR V_DINAMICO_c2;

	SET PO_TOTAL_SOLICITUDES = 0;



	IF (PI_CODIGO_UNIDAD_NEGOCIO IS NULL)  THEN SET PI_CODIGO_UNIDAD_NEGOCIO = 'NULL'; ELSE SET PI_CODIGO_UNIDAD_NEGOCIO = '''%'||PI_CODIGO_UNIDAD_NEGOCIO||'%'''; END IF;

	IF (PI_CODIGO_PRODUCTO IS NULL)  THEN SET PI_CODIGO_PRODUCTO = 'NULL'; ELSE SET PI_CODIGO_PRODUCTO = '''%'||PI_CODIGO_PRODUCTO||'%'''; END IF;

	IF (PI_CODIGO_PROCESO IS NULL)  THEN SET PI_CODIGO_PROCESO = 'NULL'; ELSE SET PI_CODIGO_PROCESO = '''%'||PI_CODIGO_PROCESO||'%'''; END IF;

	IF (PI_CODIGO_TAREA IS NULL)  THEN SET PI_CODIGO_TAREA = 'NULL'; ELSE SET PI_CODIGO_TAREA = '''%'||PI_CODIGO_TAREA||'%'''; END IF;

  IF (PI_ESTADO IS NULL)  THEN SET V_PI_ESTADO = 'NULL'; ELSE SET V_PI_ESTADO = ''''||PI_ESTADO||''''; END IF;

	IF (PI_ORDEN IS NULL) THEN SET PI_ORDEN = 'ASC'; END IF;



	SET V_SQL_QUERY = '

		SELECT 

			ROWNUMBER() OVER() AS NUMERO_FILA, 

			RESULTADO.*

		FROM (

			SELECT 

				CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_TAREA,DESCRIPCION,URL,VERSION,TIEMPO_ROJO,TIEMPO_AMARILLO,NAMESPACE,ESTADO

			FROM 

				BFP_PORTAL.BFPBM_TAREA

			WHERE 1 = 1

				AND ('||PI_CODIGO_UNIDAD_NEGOCIO||' IS NULL OR CODIGO_UNIDAD_NEGOCIO LIKE '||PI_CODIGO_UNIDAD_NEGOCIO||')

				AND ('||PI_CODIGO_PRODUCTO||' IS NULL OR CODIGO_PRODUCTO LIKE '||PI_CODIGO_PRODUCTO||')

				AND ('||PI_CODIGO_PROCESO||' IS NULL OR CODIGO_PROCESO LIKE '||PI_CODIGO_PROCESO||')

				AND ('||PI_CODIGO_TAREA||' IS NULL OR CODIGO_TAREA LIKE '||PI_CODIGO_TAREA||')

        AND ('||V_PI_ESTADO||' IS NULL OR ESTADO = '||V_PI_ESTADO||')

        	ORDER BY

				FECHA_CREACION '||PI_ORDEN||'

      	) AS RESULTADO

	';



	IF (PI_PAGINADO_CANTIDAD = 0) THEN 

		SET V_CANTIDAD = ''; 

	ELSE 

		SET V_CANTIDAD = 'WHERE RESULTADO_PAGINADO.NUMERO_FILA > '||(PI_PAGINADO_INDICE)||' AND RESULTADO_PAGINADO.NUMERO_FILA <= '||(PI_PAGINADO_INDICE+PI_PAGINADO_CANTIDAD);

	END IF;

	SET V_SQL_PAGINACION = 'SELECT * FROM ( '||V_SQL_QUERY||' ) AS RESULTADO_PAGINADO ' || V_CANTIDAD;

	PREPARE V_DINAMICO_c1 FROM V_SQL_PAGINACION;



	IF (PI_INDICADOR_CARGA_TOTAL = 1)  THEN

		SET V_SQL_TOTAL = 'SELECT COUNT(*) FROM ( '||V_SQL_QUERY||' )';

		PREPARE V_DINAMICO_c2 FROM V_SQL_TOTAL;

		OPEN c2;

		FETCH c2 into V_SQL_TOTAL_STR;

		CLOSE c2;

		SET PO_TOTAL_SOLICITUDES = INTEGER(V_SQL_TOTAL_STR);

	END IF;

	OPEN c1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_SEL (

	IN PI_CODIGO_TAREA VARCHAR(70)

)

	SPECIFIC BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_SEL

	DYNAMIC RESULT SETS 1

	LANGUAGE SQL

BEGIN

	DECLARE r1 CURSOR WITH RETURN TO CLIENT FOR

		SELECT

			CODIGO_UNIDAD_NEGOCIO,CODIGO_PRODUCTO,CODIGO_PROCESO,CODIGO_TAREA,DESCRIPCION,URL,VERSION,TIEMPO_ROJO,TIEMPO_AMARILLO,NAMESPACE,ESTADO

		FROM BFP_PORTAL.BFPBM_TAREA WHERE 

		CODIGO_TAREA = PI_CODIGO_TAREA;

	OPEN r1;

END;

CREATE OR REPLACE PROCEDURE BFP_PORTAL.SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_UPD (

    IN PI_CODIGO_UNIDAD_NEGOCIO	VARCHAR(20),

    IN PI_CODIGO_PROCESO	VARCHAR(20),

    IN PI_CODIGO_TAREA	VARCHAR(70),

    IN PI_DESCRIPCION	VARCHAR(100),

    IN PI_TIEMPO_ROJO	INTEGER,

    IN PI_TIEMPO_AMARILLO	INTEGER,

    IN PI_ESTADO	CHARACTER(1),

    IN PI_USUARIO_ACTUALIZACION	VARCHAR(50) )

  SPECIFIC "SP_MANTENIMIENTO_MAE_ACUERDO_SERVICIO_UPD"

  LANGUAGE SQL

  NOT DETERMINISTIC

  EXTERNAL ACTION

  MODIFIES SQL DATA

  CALLED ON NULL INPUT

  INHERIT SPECIAL REGISTERS

  OLD SAVEPOINT LEVEL

BEGIN

	UPDATE BFP_PORTAL.BFPBM_TAREA SET 

		CODIGO_UNIDAD_NEGOCIO = PI_CODIGO_UNIDAD_NEGOCIO, CODIGO_PROCESO = PI_CODIGO_PROCESO, DESCRIPCION = PI_DESCRIPCION, TIEMPO_ROJO = PI_TIEMPO_ROJO, TIEMPO_AMARILLO = PI_TIEMPO_AMARILLO, ESTADO = PI_ESTADO, USUARIO_ACTUALIZACION = PI_USUARIO_ACTUALIZACION, FECHA_ACTUALIZACION = CURRENT TIMESTAMP

	WHERE 

		CODIGO_TAREA = PI_CODIGO_TAREA;

END;

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."CODIGO_MODULO_WEB" IS

'Código de Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."DESCRIPCION" IS

'Descripcion';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."ORDEN" IS

'Orden del Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."URL" IS

'URL de Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."CODIGO_PERFIL" IS

'Código del Perfil';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."DESCRIPCION" IS

'Descripción del Perfil';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."CODIGO_MODULO_WEB" IS

'Código de Módulo Web Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."CODIGO_PERFIL" IS

'Código del Perfil Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."INDICADOR_VISIBLE_DEFECTO" IS

'Indicador si el Módulo esta activo por defecto  (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."CODIGO_MODULO_WEB" IS

'Código de Módulo Web Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."CODIGO_PERFIL" IS

'Código del Perfil Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."CODIGO_PROCESO" IS

'Código de Proceso asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."CODIGO_PRODUCTO" IS

'Código de Producto asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de Unidad de Negocio asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."CODIGO_MODULO_WEB" IS

'Código de Módulo Web Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."CODIGO_PERFIL" IS

'Código del Perfil Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."CODIGO_PROCESO" IS

'Código de Proceso asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."CODIGO_PRODUCTO" IS

'Código de Producto asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de Unidad de Negocio asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."CODIGO_PERFIL" IS

'Código del Perfil Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."CODIGO_PRODUCTO" IS

'Código de Producto asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."CODIGO_SUB_MODULO_WEB" IS

'Código del Sub Módulo Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de Unidad de Negocio asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."CODIGO_PERFIL" IS

'Código del Perfil Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."CODIGO_SUB_MODULO_WEB" IS

'Código del Sub Módulo Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."CODIGO_PROCESO" IS

'Código del proceso';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."CODIGO_PRODUCTO" IS

'Código de Producto asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de la Unidad de Negocio Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."DESCRIPCION" IS

'Descripción del Proceso';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."URL" IS

'URL de cada proceso';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PROCESO"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."CODIGO_PRODUCTO" IS

'Código del producto';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de la Unidad de Negocio Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."DESCRIPCION" IS

'Descripción del Producto';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."URL" IS

'URL de cada producto';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_PRODUCTO"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."CODIGO_MODULO_WEB" IS

'Código de Módulo Web Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."CODIGO_SUB_MODULO_WEB" IS

'Código del Sub Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."DESCRIPCION" IS

'Descripcion del Sub Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."ORDEN" IS

'Orden del Sub Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."URL" IS

'Url del Sub Módulo Web';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."CODIGO_PROCESO" IS

'Código de Proceso asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."CODIGO_PRODUCTO" IS

'Código de Producto asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."CODIGO_TAREA" IS

'Código de Tarea';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de la Unidad de Negocio Asociado';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."DESCRIPCION" IS

'Descripción de la Tarea';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."NAMESPACE" IS

'NAMESPACE de la tarea (Identificador para cada pagina)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."TIEMPO_AMARILLO" IS

'Tiempo en segundos que debe pasar para que la tarea se vuelva Amarillo';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."TIEMPO_ROJO" IS

'Tiempo en segundos que debe pasar para que la tarea se vuelva Rojo';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."URL" IS

'URL de cada tarea (Ejm: tare)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_TAREA"."VERSION" IS

'Versión de Tarea (Ejm: 1.0.0)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."CODIGO_UNIDAD_NEGOCIO" IS

'Código de la Unidad de Negocio';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."DESCRIPCION" IS

'Descripcion de la Unidad de Negocio';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."ESTADO" IS

'Estado (1: Activo, 0: Inactivo)';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."FECHA_ACTUALIZACION" IS

'Fecha de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."FECHA_CREACION" IS

'Fecha de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."URL" IS

'URL de la Unidad de Negocio';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."USUARIO_ACTUALIZACION" IS

'Usuario de Actualización';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."USUARIO_CREACION" IS

'Usuario de Creación';

COMMENT ON COLUMN "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO"."VERSION" IS

'Versión de la Unidad de Negocio (Ejm: 1.0.0)';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_MODULO_WEB" IS

'Esta tabla contiene la relación de módulos del aplicativo portal BPM';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL" IS

'Esta tabla contiene la relación de perfiles registrados en el BPM';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL_MODULO_WEB" IS

'Esta tabla contiene la relación de perfiles y Módulos Web asociados';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_MODULO_WEB" IS

'Esta tabla contiene la relación de perfiles, Unidades de Negocio y Procesos Asociados';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL_PROCESO_UNIDAD_NEGOCIO" IS

'Esta tabla contiene la relación de perfiles, Unidades de Negocio y Procesos Asociados';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL_PRODUCTO_SUB_MODULO_WEB" IS

'Esta tabla contiene la relación de perfiles, Uns, productos y Sub Módulos Asociados';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PERFIL_SUB_MODULO_WEB" IS

'Esta tabla contiene la relación de perfiles y Sub Módulos Asociados';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PROCESO" IS

'Esta tabla contiene los procesos definidos en cada producto';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_PRODUCTO" IS

'Esta tabla contiene los productos que se tienen actualmente';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_SUB_MODULO_WEB" IS

'Esta tabla contiene los sub módulos que pertenecen a cada Módulo';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_TAREA" IS

'Esta tabla contiene las tareas a trabajar de cada proceso';

COMMENT ON TABLE "BFP_PORTAL"."BFPBM_UNIDAD_NEGOCIO" IS

'Esta tabla contiene las unidades de negocio del Banco Financiero';

